const translations = {
    uk: {
        whoIs: "Ð¥Ñ‚Ð¾ Ñ‚Ð°ÐºÐ° GÃ†ISHÃ†?",
        tagline: "ÐÑ€Ñ‚Ð¸ÑÑ‚ÐºÐ° â€¢ Ð’Ð¸ÐºÐ¾Ð½Ð°Ð²Ð¸Ñ†Ñ â€¢ Ð¢Ð²Ð¾Ñ€ÐµÑ†ÑŒ",
        bookShow: "Ð—Ð°Ð±Ñ€Ð¾Ð½ÑŽÐ²Ð°Ñ‚Ð¸ ÑˆÐ¾Ñƒ",
        listenSong: "ÐŸÑ€Ð¾ÑÐ»ÑƒÑ…Ð°Ñ‚Ð¸ Ð¿Ñ–ÑÐ½ÑŽ",
        viewPortfolio: "ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ½ÑƒÑ‚Ð¸ Ð¿Ð¾Ñ€Ñ‚Ñ„Ð¾Ð»Ñ–Ð¾",
        bookingTitle: "Ð—Ð°Ð±Ñ€Ð¾Ð½ÑŽÐ²Ð°Ñ‚Ð¸ ÑˆÐ¾Ñƒ",
        nameLabel: "Ð’Ð°ÑˆÐµ Ñ–Ð¼'Ñ:",
        namePlaceholder: "Ð’Ð²ÐµÐ´Ñ–Ñ‚ÑŒ Ð²Ð°ÑˆÐµ Ñ–Ð¼'Ñ",
        contactLabel: "ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚ (Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½/email):",
        contactPlaceholder: "Ð’Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñƒ Ð°Ð±Ð¾ email",
        eventLabel: "Ð”Ð»Ñ ÐºÐ¾Ð³Ð¾ ÑˆÐ¾Ñƒ:",
        eventPlaceholder: "ÐžÐ¿Ð¸ÑˆÑ–Ñ‚ÑŒ Ð¿Ð¾Ð´Ñ–ÑŽ",
        locationLabel: "Ð”Ðµ:",
        locationPlaceholder: "ÐœÑ–ÑÑ†Ðµ Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð½Ñ",
        expectationsLabel: "Ð©Ð¾ Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚Ðµ:",
        expectationsPlaceholder: "ÐžÐ¿Ð¸ÑˆÑ–Ñ‚ÑŒ Ð²Ð°ÑˆÑ– Ð¾Ñ‡Ñ–ÐºÑƒÐ²Ð°Ð½Ð½Ñ",
        submitBtn: "ÐÐ°Ð´Ñ–ÑÐ»Ð°Ñ‚Ð¸ Ð·Ð°ÑÐ²ÐºÑƒ",
        successMessage: "Ð—Ð°ÑÐ²ÐºÑƒ Ð½Ð°Ð´Ñ–ÑÐ»Ð°Ð½Ð¾! Ð— Ð²Ð°Ð¼Ð¸ Ð·Ð²'ÑÐ¶ÑƒÑ‚ÑŒÑÑ Ð½Ð°Ð¹Ð±Ð»Ð¸Ð¶Ñ‡Ð¸Ð¼ Ñ‡Ð°ÑÐ¾Ð¼.",
        errorMessage: "ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²ÐºÐ¸. Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ‰Ðµ Ñ€Ð°Ð· Ð°Ð±Ð¾ Ð·Ð²'ÑÐ¶Ñ–Ñ‚ÑŒÑÑ Ð½Ð°Ð¿Ñ€ÑÐ¼Ñƒ.",
        contentError1: "Ð‘ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ°, Ð¿ÐµÑ€ÐµÑ„Ñ€Ð°Ð·ÑƒÐ¹Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ.",
        contentError2: "ÐœÐ¸ Ñ†Ñ–Ð½ÑƒÑ”Ð¼Ð¾ Ð¿Ð¾Ð²Ð°Ð³Ñƒ. Ð‘ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ°, Ð¾Ð¿Ð¸ÑˆÑ–Ñ‚ÑŒ Ð²Ð°ÑˆÑ– Ð¾Ñ‡Ñ–ÐºÑƒÐ²Ð°Ð½Ð½Ñ Ð²Ñ–Ð´ ÑˆÐ¾Ñƒ Ð±ÐµÐ· ÑÐ¿Ð°Ð¼Ñƒ.",
        soundToggleTitle: "Ð£Ð²Ñ–Ð¼ÐºÐ½ÑƒÑ‚Ð¸/Ð²Ð¸Ð¼ÐºÐ½ÑƒÑ‚Ð¸ Ð·Ð²ÑƒÐº",
        touchInstruction: "Ð”Ð¾Ñ‚Ð¾Ñ€ÐºÐ½Ð¸ÑÑŒ Ð´Ð¾ ÐºÐ°Ñ€Ñ‚ÐºÐ¸",
        portfolioTitle: "ÐŸÐ¾Ñ€Ñ‚Ñ„Ð¾Ð»Ñ–Ð¾",
        bookingNotice: "ÐšÐ¾Ð¶ÐµÐ½ Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð¼Ð°Ð½Ñ Ð°Ð´Ð°Ð¿Ñ‚ÑƒÑ”Ñ‚ÑŒÑÑ Ð´Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ€Ñƒ, Ð°ÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ— Ñ‚Ð° Ð·Ð°Ð´ÑƒÐ¼Ñƒ Ð¿Ð¾Ð´Ñ–Ñ— â€” Ð¶Ð¾Ð´Ð½Ðµ ÑˆÐ¾Ñƒ Ð½Ðµ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑŽÑ”Ñ‚ÑŒÑÑ.",
        infoTitle: "Ð¥Ñ‚Ð¾ Ñ‚Ð°ÐºÐ° GÃ†ISHÃ†?",
        infoText1: "Gaeishae (formerly known as èŠ¸è€…) â€” Ð°Ñ€Ñ‚Ð¸ÑÑ‚ÐºÐ°, Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð¼ÐµÑ€ÐºÐ° Ñ‚Ð° storyteller. Child of art, Ð²Ð¾Ð½Ð° ÑƒÐ²Ñ–Ð±Ñ€Ð°Ð»Ð° Ñ„Ñ–Ð»Ð¾ÑÐ¾Ñ„Ñ–ÑŽ ÑÐ¿Ð¾Ð½ÑÑŒÐºÐ¾Ñ— ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð¸ Ð³ÐµÐ¹ÑˆÑ– Ð¹ Ð»ÐµÐ²Ñ–Ñ‚ÑƒÑ” Ð½Ð° Ð¼ÐµÐ¶Ñ– Ð¾Ð±Ñ€Ð°Ð·Ñ–Ð², ÑÐµÐ½ÑÑ–Ð² Ñ‚Ð° Ð²Ð¸Ñ‚Ð¾Ð½Ñ‡ÐµÐ½Ð¾ÑÑ‚Ñ–.",
        infoText2: "Ð‡Ñ— Ñ‚Ñ–Ð»ÐµÑÐ½Ð¸Ð¹ Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð¼Ð°Ð½Ñ, Ñƒ ÑÐºÐ¾Ð¼Ñƒ Ð³Ð¾Ð»Ð¾Ñ, Ñ€ÑƒÑ… Ñ– Ð¾Ð±Ñ€Ð°Ð· Ð·Ð»Ð¸Ð²Ð°ÑŽÑ‚ÑŒÑÑ Ð² Ñ”Ð´Ð¸Ð½Ñƒ Ð´Ñ–ÑŽ, Ð¿Ñ€Ð¾Ð±ÑƒÐ´Ð¶ÑƒÑ” Ð¿Ñ–Ð´ÑÐ²Ñ–Ð´Ð¾Ð¼Ñ– Ð±Ð°Ð¶Ð°Ð½Ð½Ñ Ñ‚Ð° Ð²ÐµÐ´Ðµ Ð´Ð¾ ÐºÐ°Ñ‚Ð°Ñ€ÑÐ¸ÑÑƒ â€” Ð³Ñ€Ð°ÑŽÑ‡Ð¸.",
        infoText3: "Gaeishae â€” Ñ†Ðµ Ð°ÑƒÑ€Ð° ÑÐ²Ð¾Ð±Ð¾Ð´Ð¸, ÑÐ¿Ð¾ÐºÑƒÑÐ¸ Ñ‚Ð° Ð¿Ñ€Ð¸ÑÑƒÑ‚Ð½Ð¾ÑÑ‚Ñ–: Ð´Ð¾ÑÐ²Ñ–Ð´, ÑÐºÐ¸Ð¹ Ñ…Ð¾Ñ‡ÐµÑ‚ÑŒÑÑ Ð²Ñ–Ð´Ñ‡ÑƒÑ‚Ð¸ Ð·Ð½Ð¾Ð²Ñƒ Ñ– Ð·Ð½Ð¾Ð²Ñƒ.",
        metaDescription: "Gaeishae (ex. èŠ¸è€…) â€” Ð°Ñ€Ñ‚Ð¸ÑÑ‚ÐºÐ°, Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð¼ÐµÑ€ÐºÐ° Ñ‚Ð° storyteller. Ð’Ñ–Ð´ÐºÑ€Ð¸Ð¹Ñ‚Ðµ Ñ„Ñ–Ð»Ð¾ÑÐ¾Ñ„Ñ–ÑŽ ÑÐ¿Ð¾Ð½ÑÑŒÐºÐ¾Ñ— Ð³ÐµÐ¹ÑˆÑ– Ð² ÑÑƒÑ‡Ð°ÑÐ½Ð¾Ð¼Ñƒ Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð¼Ð°Ð½ÑÑ–.",
        watchTeaser: "Ð”Ð¸Ð²Ð¸Ñ‚Ð¸ÑÑ Ñ‚Ñ–Ð·ÐµÑ€"
    },
    en: {
        whoIs: "Who is GÃ†ISHÃ†?",
        tagline: "Artist â€¢ Performer â€¢ Creator",
        bookShow: "Book a Show",
        listenSong: "Listen to Song",
        viewPortfolio: "View Portfolio",
        watchTeaser: "Watch teaser",
        bookingTitle: "Book a Show",
        nameLabel: "Your name:",
        namePlaceholder: "Insert your name",
        contactLabel: "Contact (phone/email):",
        contactPlaceholder: "Your phone number or email",
        eventLabel: "Event details:",
        eventPlaceholder: "Describe the event",
        locationLabel: "Location:",
        locationPlaceholder: "Venue location",
        expectationsLabel: "What do you expect:",
        expectationsPlaceholder: "Describe your expectations",
        submitBtn: "Send Request",
        successMessage: "Request sent! We will contact you soon.",
        errorMessage: "Sending error. Please try again or contact directly.",
        contentError1: "Please rephrase your message.",
        contentError2: "We value respect. Please describe your expectations for the show without spamming.",
        soundToggleTitle: "Toggle sound on/off",
        touchInstruction: "Touch the card",
        portfolioTitle: "Portfolio",
        bookingNotice: "Each performance adapts to the space, audience, and event concept â€” no two shows are alike.",
        infoTitle: "Who is GÃ†ISHÃ†?",
        infoText1: "Gaeishae (formerly known as èŠ¸è€…) â€” a performance artist and storyteller. Child of art, she draws from the philosophy of the Japanese geisha and moves gracefully between images, feelings, and elegance.",
        infoText2: "Her performances, where voice, movement, and presence come together as one, awaken hidden desires and lead to catharsis â€” playfully.",
        infoText3: "Gaeishae is an aura of freedom, seduction, and presence: an experience you want to feel again and again.",
        metaDescription: "Gaeishae (formerly known as èŠ¸è€…) â€” a performance artist and storyteller. Experience the art of Japanese geisha philosophy merged with modern performance."
    }
};

class Localization {
    constructor() {
        this.currentLang = this.detectLanguage();
        this.init();
    }

    detectLanguage() {
        // Check URL parameter first
        const urlParams = new URLSearchParams(window.location.search);
        const langParam = urlParams.get('lang');
        if (langParam && translations[langParam]) {
            return langParam;
        }

        // Check localStorage
        const savedLang = localStorage.getItem('gaeishae-lang');
        if (savedLang && translations[savedLang]) {
            return savedLang;
        }

        // Check browser language
        const browserLang = navigator.language || navigator.userLanguage;
        if (browserLang.startsWith('uk')) {
            return 'uk';
        }

        // Default to Ukrainian
        return 'uk';
    }

    init() {
        this.createLanguageToggle();
        this.applyTranslations();
        this.updateURL();
    }

    createLanguageToggle() {
        const langToggle = document.createElement('button');
        langToggle.className = 'lang-toggle';
        langToggle.innerHTML = this.currentLang === 'uk' ? 'ðŸ‡ºðŸ‡¦' : 'ðŸ‡¬ðŸ‡§';
        langToggle.title = this.currentLang === 'uk' ? 'Switch to English' : 'ÐŸÐµÑ€ÐµÐ¼ÐºÐ½ÑƒÑ‚Ð¸ Ð½Ð° ÑƒÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ';
        
        langToggle.addEventListener('click', () => {
            this.switchLanguage();
        });

        // Add to body
        document.body.appendChild(langToggle);

        // Add styles
        this.addLanguageToggleStyles();
    }

    addLanguageToggleStyles() {
        const styles = `
            .lang-toggle {
                position: fixed;
                top: 20px;
                left: 20px;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                width: 50px;
                height: 50px;
                font-size: 24px;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            }

            .lang-toggle:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: scale(1.1);
            }

            @media (max-width: 500px) {
                .lang-toggle {
                    width: 40px;
                    height: 40px;
                    font-size: 20px;
                }
            }
        `;

        const styleSheet = document.createElement('style');
        styleSheet.textContent = styles;
        document.head.appendChild(styleSheet);
    }

    switchLanguage() {
        this.currentLang = this.currentLang === 'uk' ? 'en' : 'uk';
        localStorage.setItem('gaeishae-lang', this.currentLang);
        
        this.applyTranslations();
        this.updateURL();
        this.updateLanguageToggle();
    }

    updateLanguageToggle() {
        const langToggle = document.querySelector('.lang-toggle');
        langToggle.innerHTML = this.currentLang === 'uk' ? 'ðŸ‡ºðŸ‡¦' : 'ðŸ‡¬ðŸ‡§';
        langToggle.title = this.currentLang === 'uk' ? 'Switch to English' : 'ÐŸÐµÑ€ÐµÐ¼ÐºÐ½ÑƒÑ‚Ð¸ Ð½Ð° ÑƒÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÑƒ';
    }

    updateURL() {
        const url = new URL(window.location);
        url.searchParams.set('lang', this.currentLang);
        window.history.replaceState({}, '', url);
    }

    applyTranslations() {
        const t = translations[this.currentLang];

        // Update all elements with data-i18n attributes
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (t[key]) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    if (element.type === 'text' || element.tagName === 'TEXTAREA') {
                        element.placeholder = t[key];
                    }
                } else {
                    element.textContent = t[key];
                }
            }
        });

        // Update title attributes
        document.querySelectorAll('[data-i18n-title]').forEach(element => {
            const key = element.getAttribute('data-i18n-title');
            if (t[key]) {
                element.title = t[key];
            }
        });

        // Update HTML lang attribute
        document.documentElement.lang = this.currentLang;

        // Update SEO Meta Tags
        if (t.metaDescription) {
            document.querySelector('meta[name="description"]').setAttribute('content', t.metaDescription);
            document.querySelector('meta[property="og:description"]').setAttribute('content', t.metaDescription);
            document.querySelector('meta[property="twitter:description"]').setAttribute('content', t.metaDescription);
        }
    }

    t(key) {
        return translations[this.currentLang][key] || key;
    }

    getCurrentLang() {
        return this.currentLang;
    }
}

// Export for use in other modules
window.Localization = Localization;